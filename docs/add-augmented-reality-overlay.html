

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Add AR Overlays in MatrixScan &mdash; Data Capture SDK 6.1.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Data Capture SDK
          

          
          </a>

          
            
            
              <div class="version">
                6.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">First Steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="run-samples.html">Run our Sample Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="add-sdk.html">Add the SDK to Your App</a></li>
</ul>
<p class="caption"><span class="caption-text">Barcode Scanning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="get-started-barcode.html">Get Started With Barcode Scanning</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure-barcodes.html">Configure Which Barcodes Are Read</a></li>
<li class="toctree-l1"><a class="reference internal" href="barcode-symbologies.html">Barcode Symbologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimize-performance.html">Optimize Scanning Performance</a></li>
</ul>
<p class="caption"><span class="caption-text">All Capture Modes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="camera-advanced.html">Advanced Camera Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="scan-area.html">Set up the Active Scan Area</a></li>
<li class="toctree-l1"><a class="reference internal" href="ui-examples.html">Choose the Scanner UI</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="core/overview.html">ScanditCaptureCore</a></li>
<li class="toctree-l1"><a class="reference internal" href="barcode-capture/overview.html">ScanditBarcodeCapture</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>
<p class="caption"><span class="caption-text">More Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support &amp; FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="features-by-platform.html">Features By Platform</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.scandit.com/barcode-scanner-sdk.html">SDK 5.x Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="migrate-to-6.html">Migrate from Barcode Scanner 5.x</a></li>
<li class="toctree-l1"><a class="reference external" href="http://ssl.scandit.com">Dashboard</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Data Capture SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Add AR Overlays in MatrixScan</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="add-ar-overlays-in-matrixscan">
<span id="add-augmented-reality-overlay"></span><h1>Add AR Overlays in MatrixScan<a class="headerlink" href="#add-ar-overlays-in-matrixscan" title="Permalink to this headline">#</a></h1>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">#</a></h2>
<p>To proceed, you need to setup a project that uses matrix scan first, check out <a class="reference internal" href="get-started-matrixscan.html#matrixscan-getting-started"><span class="std std-ref">this guide</span></a> (you can ignore the bottom section about visualization of tracked barcodes using BarcodeTrackingBasicOverlay).</p>
</div>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">#</a></h2>
<p>There are two ways to add advanced AR overlays to a Data Capture View:</p>
<ul class="simple">
<li><p>Take advantage of the <code class="docutils literal notranslate"><span class="pre">BarcodeTrackingAdvancedOverlay</span></code> class, which provides a ready-to-use implementation for view-based AR overlays.</p></li>
<li><p>Provide your own custom implementation, using the function <code class="docutils literal notranslate"><span class="pre">OnSessionUpdated</span></code> to retrieve the barcode’s current screen position for each frame.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first way is the easiest, as it takes care of adding, removing and animating the overlay’s views whenever needed. It’s also flexible enough to cover the majority of use cases.</p>
</div>
</div>
<div class="section" id="using-barcodetrackingadvancedoverlay">
<h2>Using BarcodeTrackingAdvancedOverlay<a class="headerlink" href="#using-barcodetrackingadvancedoverlay" title="Permalink to this headline">#</a></h2>
<p>As mentioned above, the advanced overlay combined with its <code class="docutils literal notranslate"><span class="pre">IBarcodeTrackingAdvancedOverlayListener</span></code> offers an easy way of adding augmentations to your <a class="reference internal" href="core/api/ui/data-capture-view.html#class-scandit.datacapture.core.ui.DataCaptureView" title="DataCaptureView class">DataCaptureView</a>.
In this guide we will add a view above each barcode showing its content.</p>
<p>First of all, create a new instance of <code class="docutils literal notranslate"><span class="pre">BarcodeTrackingAdvancedOverlay</span></code> and add it to the DataCaptureView.</p>
<p>At this point, you have two options.</p>
<ul class="simple">
<li><p>Add a <code class="docutils literal notranslate"><span class="pre">IBarcodeTrackingAdvancedOverlayListener</span></code> to the overlay.</p></li>
<li><p>Use the setters in the <code class="docutils literal notranslate"><span class="pre">BarcodeTrackingAdvancedOverlay</span></code> to specify the view, anchor and offset for each barcode.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The second way will take priority over the first one, which means that if a view for a barcode has been set using <code class="docutils literal notranslate"><span class="pre">SetViewForTrackedBarcode</span></code>, the function <code class="docutils literal notranslate"><span class="pre">ViewForTrackedBarcode</span></code> won’t be invoked for that specific barcode.</p>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">IBarcodeTrackingAdvancedOverlayListener</span></code></p>
<ul class="simple">
<li><p>You need to implement <code class="docutils literal notranslate"><span class="pre">IBarcodeTrackingAdvancedOverlayListener</span></code>. This interface’s methods are invoked every time a barcode is newly tracked.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ViewForTrackedBarcode</span></code> asks for a view to animate on top of the barcode. You can handle touch events of the view as you normally would. Returning <em>null</em> will show no view.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AnchorForTrackedBarcode</span></code> asks how to anchor the view to the barcode through <a class="reference internal" href="core/api/anchor.html#enum-scandit.datacapture.core.Anchor" title="Anchor enum">Anchor</a>. Be aware that it anchors the view’s center to the anchor point. To achieve anchoring the top of the view or the bottom etc. you will have to set an offset as explained in the next point.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OffsetForTrackedBarcode</span></code> asks for an offset that is applied on the already anchored view. This offset is expressed through a <a class="reference internal" href="core/api/common.html#struct-scandit.datacapture.core.PointWithUnit" title="PointWithUnit struct">PointWithUnit</a>.</p></li>
</ul>
<p>Using the setters in the <code class="docutils literal notranslate"><span class="pre">BarcodeTrackingAdvancedOverlay</span></code></p>
<p>The function <code class="docutils literal notranslate"><span class="pre">OnSessionUpdated</span></code> gives you access to a <code class="docutils literal notranslate"><span class="pre">BarcodeTrackingSession</span></code>, which contains all added, updated and removed tracked barcodes. From here you can create the view you want to display, and then call <code class="docutils literal notranslate"><span class="pre">SetViewForTrackedBarcode</span></code>, <code class="docutils literal notranslate"><span class="pre">SetAnchorForTrackedBarcode</span></code> and <code class="docutils literal notranslate"><span class="pre">SetOffsetForTrackedBarcode</span></code></p>
</div>
<div class="section" id="provide-your-own-custom-implementation">
<h2>Provide your own custom implementation<a class="headerlink" href="#provide-your-own-custom-implementation" title="Permalink to this headline">#</a></h2>
<p>If you do not want to use our overlay, it is also possible to add augmented reality features based on the tracking identifier and <a class="reference internal" href="core/api/common.html#struct-scandit.datacapture.core.Quadrilateral" title="quadrilateral struct">quadrilateral</a> coordinates that every tracked barcode has. Below are some pointers.</p>
<ul class="simple">
<li><p>Set a <code class="docutils literal notranslate"><span class="pre">IBarcodeTrackingListener</span></code> on the barcode tracking</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">OnSessionUpdated</span></code> function fetch the <code class="docutils literal notranslate"><span class="pre">AddedTrackedBarcodes</span></code>, <code class="docutils literal notranslate"><span class="pre">UpdatedTrackedBarcodes</span></code> and <code class="docutils literal notranslate"><span class="pre">RemovedTrackedBarcodes</span></code> tracked barcodes.</p></li>
<li><p>Create and show the views for the added barcodes.</p></li>
<li><p>Remove the views for the lost barcodes.</p></li>
<li><p>Compare the updated barcodes of the current frame with the ones from the previous one, and change your visualizations accordingly. Instead of using <a class="reference internal" href="barcode-capture/api/barcode.html#property-scandit.datacapture.barcode.Barcode.Location" title="Barcode.location property">Barcode.location</a> which gives you the exact location of the barcode in the frame you should generally use <code class="docutils literal notranslate"><span class="pre">PredictedLocation</span></code> which gives you a predicted location for the barcode. Using the predicted location avoids lagging behind the camera feed.</p></li>
<li><p>There are some state transitions where animating from the previous location of a tracked barcode to its current position can end up with weird artifacts because the order of the location’s corners is not stable. If your visualization depends on the order of the corners (by for example drawing a rectangle connecting all corners), make sure that you query <code class="docutils literal notranslate"><span class="pre">ShouldAnimateFromPreviousToNextState</span></code> before animating. If the order of the corners were to change it is possible that an animation would flip the visualization, which is not what happened to the actual barcode. However, a visualization that just draws something in the center of the location does not depend on the the order of corners and can ignore this.</p></li>
<li><p>When animating your views take into consideration <code class="docutils literal notranslate"><span class="pre">DeltaTime</span></code> which tells you how long it will take the code to move to the predicted location. This time generally is about as long as it will take to process the next frame, giving you a new predicted location right as your previous animation is coming to an end.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This frame coordinates needs to be mapped to view coordinates, using <a class="reference internal" href="core/api/ui/data-capture-view.html#method-scandit.datacapture.core.ui.DataCaptureView.MapFrameQuadrilateralToView" title="DataCaptureView.viewQuadrilateralForFrameQuadrilateral() method">DataCaptureView.viewQuadrilateralForFrameQuadrilateral()</a>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Scandit AG

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-23556890-7', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>